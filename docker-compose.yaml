version: '3.8'

services:
    nginx:
        image: nginx:1.25-alpine
        ports:
            - "80:80"
        volumes:
            - ./assets/site-content:/usr/share/nginx/html:rw
            - ./assets/config:/etc/nginx/conf.d:rw

    shiny:
        build:
            context: .
            dockerfile: Dockerfile
        image: aidaho-edu.uni-hohenheim.de/jbleher/shiny_thas2025:0.1
        platform: linux/amd64
        container_name: ais_shiny
        restart: unless-stopped
        ports:
            - "3838:3838"
        volumes:
            - ./assets/shiny/:/srv/shiny-server/:rw
            - ./assets/logs:/var/log/shiny-server:rw
        environment:
            # not strictly requiredâ€”Shiny server listens on 3838 by default
            - SHINY_PORT=3838

